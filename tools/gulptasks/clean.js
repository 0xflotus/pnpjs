//******************************************************************************
//* clean.js
//*
//* Defines a custom gulp task for removing all output files that were 
//* autogenerated by other gulp tasks 
//******************************************************************************

const gulp = require("gulp"),
    del = require("del"),
    yargs = require("yargs").argv,
    gutil = require("gulp-util");

gulp.task('clean', (done) => {

    if (yargs.noclean || yargs.nc) {
        gutil.log(`${gutil.colors.bgWhite(" ")} Skipping clean due to flag.`);
        return done();
    }

    const directories = [
        "./build",
        "./dist",
        "./debugging",
        "./serve",
        "./testing"
    ];

    gutil.log(`${gutil.colors.bgBlue(" ")} Cleaning directories: ${directories.join(", ")}.`);
    del(directories).then(() => {
        gutil.log(`${gutil.colors.bgGreen(" ")} Cleaned directories: ${directories.join(", ")}.`);
        done();
    }).catch(e => {
        gutil.log(`${gutil.colors.bgRed(" ")} Error cleaned directories: ${directories.join(", ")}.`);
        done(e);
    });
});

gulp.task("clean-docs", (done) => {
    del("./docs").then(() => {
        done();
    });
});
